---
  layout: post
  title: Firefox perd ma mémoire
  date: 2011-12-10 13:53:01
  tags:
  - Mozilla
---

La barre qui déchire sa mère de Firefox est vraiment une barre trop-d-la-balle. Pour qui comme moi, l'âge, l'alcool et Twitter aidant, n'a plus aucune mémoire, c'est une béquille devenue au fil des années indispensable. J'ai abandonné les marques-pages, je ne note plus mes découvertes. Il suffit que je me souvienne avoir lu un truc quelque part pour que comme par magie la barre tip-top me retrouve instantanément la page. Enfin, elle me les retrouvait, parce que depuis quelques temps, j'ai l'impression qu'elle perd la mémoire. Elle ne se souvient plus de rien. Hier, je lui ai demandé une page que j'étais sûr d'avoir vu il y a moins d'un mois, et nada, pas moyen de remettre la main dessus :( Du coup j'ai sorti ma loupe, et ouvert l'historique. Beuh. L'historique était limité à quelques semaines. «&nbsp;Ouate de phoque ???&nbsp;» ai-je demandé au chat. «&nbsp;Tu as sans doute installé une extension qui a modifié les paramètres de l'historique&nbsp;» a-t-il grommelé avant de se rendormir. Il me connait bien. Bon, en route pour voir comment est réglé l'historique. Euh, ça se trouve où ? Aucun réglage visible, j'ouvre le capot, cherche les clés de configuration de l'historique, en trouve quelques unes, les balance à mozillazine pour connaître leur signification, et finit par tomber par trouver un [article de Marco Bonardo][Marco] datant de janvier 2010 où il explique avoir mis en place un nouveau [gestionnaire de durée d'expiration de l'historique][Places]. Auparavant, le nombre de jours de navigation conservés dépendait de plusieurs critères: les choix de l'utilisateur et des limites maximales (180 jours ou 40.000 URL) et minimales (jamais moins de 90 jours). Cela a été jugé trop complexe, et il a été décidé de ne plus utiliser qu'un seul algorithme qui décide de la taille optimale de l'historique, en fonction des caractéristiques du matériel, de façon à ce que le composant ne risque pas de ralentir le navigateur. L'inconvénient est que l'utilisateur n'a plus du tout de contrôle sur la durée de conservation des URLs qu'il visite. On peut certes toujours les supprimer, soit à la main, soit via la fonction de suppression des traces ad hoc, mais on ne peut plus fixer de limites maximale, par exemple si l'on souhaite qu'il conserve plus de trois mois d'activité. On ne peut même pas connaître les limites déterminées par l'algorithme[^limits]. 

Les objectifs de cette modification étaient entre autre de réduire la confusion de l'utilisateur, en supprimant des options peu claires, et d'améliorer la réactivité du navigateur, en gérant mieux le nettoyage de l'historique, pour éviter des ralentissements. Le nettoyage est depuis transparent, les objectifs ont été atteints. Mais les utilisateurs avancés l'ont payé en perdant un peu de contrôle. Et sur des configurations matérielles aussi [limitées][décroissance] que la mienne, la barre formidable perd tout son intérêt. Je lui avais confié la gestion de ma mémoire, elle l'a perdue, me voici tout dépourvu, mes URLs se sont envolues avant même que la bise (smack !) fut venue.

[^limits]: en fait, quelques clés cachés dans `about:config` et préfixées par `places.history` permettent de connaître ces limites, et peut-être de les modifier, mais je ne suis pas sûr qui toucher soit sans risque;
[^marco]: à noter que Marco est également l'auteur de [deux extensions][^addons] permettant l'une de gérer plus finalement l'expiration de l'historique et la seconde d'effectuer des maintenances sur Places, la base de données gérant les marque-pages et l'historique;
[Marco]: http://blog.bonardo.net/2010/01/20/places-got-async-expiration
[Places]: https://wiki.mozilla.org/Firefox/Projects/Places_async_expiration
[addons]: https://addons.mozilla.org/en-US/firefox/user/1020779/
[décroissance]: http://esquisses.clochix.net/2011/11/13/D%C3%A9croissance/
